---
layout: post
title: VTK and Volume Visualization
tags:
- chest
- computer science
- convert
- CT
- graphics
- pvm
- raw
- school
- visualization
- volume
- vtk
status: publish
type: post
published: true
meta:
  _edit_last: '2'
---
This week for Scientific Visualization, we're talking about volume rendering and using VTK to explore some data.  I got some datasets from <a href="http://www9.informatik.uni-erlangen.de/External/vollib/">The Volume Library</a> and after a little tinkering, got VTK to render them. (And now a quick aside on how to do this as I didn't find much information on the subject).

I used a tool (pvm2raw) available as part of the <a href="http://www.stereofx.org/volume.html">V^3</a> library to convert the pvm files to raw, but VTK requires its own simple <a href="http://www.eichberger.de/2005/10/how-to-convert-raw-file-to-vtk.html">header</a>.  I actually found that this particular header didn't work (perhaps a VTK versioning problem?) and so taking guidance from this, checked the header of one of the VTK-included volumes:
<code>
bash $> head VTKData/ironProt.vk
</code>

This header more or less included a little information on the grid size, spacing and representation of the data:
<code>
# vtk DataFile Version 1.0
&lt;Name of File&gt;

BINARY

DATASET STRUCTURED_POINTS

DIMENSIONS &lt;x&gt; &lt;y&gt; &lt;z&gt;
ASPECT_RATIO 1 &lt;y/x&gt; &lt;z/x&gt;
ORIGIN 0 0 0

POINT_DATA &lt;x * y * z&gt;
SCALARS scalars &lt;unsigned_char|unsigned_short&gt;
LOOKUP_TABLE default
&lt;remember to include a newline here&gt;
</code>

Concatenating the header with the raw:
<code>
bash $> cat header CT-Head.raw > CT-Head.vtk
</code>

At that point, I was in business and was able to move on to generating pretty pictures.  Granted, these datasets are pretty sparse, but still VTK did a pretty reasonable job.  <strong>Update:</strong> a comment asked for a little bit more detail on this assignment, and so I'm including <a href='http://dan.lecocq.us/wordpress/wp-content/uploads/2009/11/report.pdf'>my report</a> for the project.

[gallery link="file" orderby="ID"]

I was amazed today that we can see inside of things... without taking them apart.  What an age to live in.  Especially the <a href="http://www.visualiseringscenter.se/1/1.0.1.0/230/1/">virtual autopsy table</a> I read about recently.  In 20 years, we'll have Firefly-style real-time holographic body scans (ignore music, skip to 0:45):

<object width="480" height="385" class="aligncenter"><param name="movie" value="http://www.youtube.com/v/Kgq_Psl9N6Q&hl=en&fs=1&"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed src="http://www.youtube.com/v/Kgq_Psl9N6Q&hl=en&fs=1&" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="480" height="385"></embed></object>
