
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Motion to the Rescue - My Octopress Blog</title>
  <meta name="author" content="Your Name">

  
  <meta name="description" content="For the last several weeks, things have been disappearing from my office area. First, a backpack I had left out. I had assumed that people in an &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://dlecocq.github.com/blog/2009/10/31/motion-to-the-rescue">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="My Octopress Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-39246569-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">My Octopress Blog</a></h1>
  
    <h2>A blogging framework for hackers.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:dlecocq.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Motion to the Rescue</h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-10-31T00:00:00-07:00" pubdate data-updated="true">Oct 31<span>st</span>, 2009</time>
        
      </p>
    
  </header>


<div class="entry-content">For the last several weeks, things have been disappearing from my office area.  First, a backpack I had left out.  I had assumed that people in an academic building full of offices would be trustworthy, perhaps I had this one coming.  A couple weeks after that, I went to use my camera only to find it gone.  Funny, I thought I locked that drawer.  I guess I must have been mistaken.  A couple weeks after that, my iPhone gone.  This time, I&#8217;m certain I locked the drawer, and there are marks on the cabinet that indicate it being forced open.

Fed up with the disappearing devices, my friend Tyler and I set out on a mission.  We went into Jeddah, bought a webcam and using the <a href="http://www.theregister.co.uk/2005/02/17/chav_burglar/">popular</a> (thank to Iain for the link) Linux package <a href="http://www.lavrsen.dk/twiki/bin/view/Motion/WebHome">motion</a>, we set up a hidden motion-detecting spy cam in our office.  We have a Linux box sitting near our desk (we&#8217;ve locked it to the floor), and so we hid the camera, trained on the place where most of disappearances had taken place.

[caption id=&#8221;attachment_680&#8221; align=&#8221;aligncenter&#8221; width=&#8221;300&#8221; caption=&#8221;A test shot of Tyler as we&#39;re setting it up.&#8221;]<a href="http://dan.lecocq.us/wordpress/wp-content/uploads/2009/10/01-20091023174435-04.jpg"><img src="http://dan.lecocq.us/wordpress/wp-content/uploads/2009/10/01-20091023174435-04-300x225.jpg" alt="A test shot of Tyler as we&#039;re setting it up." title="01-20091023174435-04" width="300" height="225" class="size-medium wp-image-680" /></a>[/caption]

What motion does is that every time it detects the picture it sees changing, it takes pictures for five seconds (or until the motion stops - which ever takes longer).  It&#8217;s supposed to be able to encode a video with ffmpeg on the fly, but as it wasn&#8217;t working right for us, we decided to just go ahead and throw it into a script.  I wrote a short bash script that just took all the photos, archived them and then generated a video (when dealing with the tens of thousands of photos generated in an average day and night I learned about xargs).  It also provides triggers for when motion is captured (for example, if you&#8217;d like to update <a href="http://tech.shantanugoel.com/2008/05/14/keep-tab-on-home-security-with-a-webcam-and-twitter.html">Twitter</a> (via <a href="http://lifehacker.com/391141/get-twitter-notifications-from-a-motion+detecting-webcam">Lifehacker</a>) you can do this with curl).

One night, when bored and filled with anger about the situation, I decided to check the feed and found footage of someone clear-as-day breaking into my cabinet.  I first saw it about 20 minutes after the fact, but I was sure the guy was still there.  I called Tyler and we quickly deliberated (after getting the opinions of a couple officemates) and we decided to wait until the morning and talk to the security officer.

[caption id=&#8221;attachment_681&#8221; align=&#8221;aligncenter&#8221; width=&#8221;300&#8221; caption=&#8221;Looking for goodies.  The man&#39;s face is not visible in this shot nor is this frame alone incriminating.  In the context of the video, you can see him gain entry, begin rummaging and removing items.&#8221;]<a href="http://dan.lecocq.us/wordpress/wp-content/uploads/2009/10/01-20091026215724-10.jpg"><img src="http://dan.lecocq.us/wordpress/wp-content/uploads/2009/10/01-20091026215724-10-300x225.jpg" alt="Looking for goodies.  The man&#039;s face is not visible in this shot nor is this frame alone incriminating.  In the context of the video, you can see him gain entry, begin rummaging and removing items." title="01-20091026215724-10" width="300" height="225" class="size-medium wp-image-681" /></a>[/caption]

We spent some time with them the next morning, giving them footage and printing key frames, and then they said they&#8217;d look into it.  They assured us they would not involve the local authorities if they didn&#8217;t have to (the penalty for such crimes in Saudi Arabia can be quite stiff) and would take care of it discreetly.  That night, they arrested four people and recovered a number of electronic devices.  They held them as evidence for a bit, but today, I was given back my camera and iPhone (the only really big-ticket items I had stolen).

I am extremely relieved to have these back, especially my camera as I had been wanting to take photos of trips, events, etc. in its absence.  Our next step was going to have off-site storage in case the bandits took off with our computer, but it would seem it wasn&#8217;t necessary.

Motion: 1, Thieves: 0

Of course, this was not a solo effort by any means.  Some system admins and colleagues in the office park offered input, and the evidence wouldn&#8217;t have left our webcam if not for the security staff.  Thanks, guys.
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Your Name</span></span>

      








  


<time datetime="2009-10-31T00:00:00-07:00" pubdate data-updated="true">Oct 31<span>st</span>, 2009</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://dlecocq.github.com/blog/2009/10/31/motion-to-the-rescue/" data-via="danlecocq" data-counturl="http://dlecocq.github.com/blog/2009/10/31/motion-to-the-rescue/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2009/10/29/movember-kaust/" title="Previous Post: Movember @ KAUST">&laquo; Movember @ KAUST</a>
      
      
        <a class="basic-alignment right" href="/blog/2009/11/04/compustalgia/" title="Next Post: Compustalgia">Compustalgia &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/10/11/running-sudo-with-pssh/">Running sudo with pssh</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/21/rough-array-hash-benchmark/">Rough Array Hash Benchmark</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/05/20/taskmaster-from-disqus/">Taskmaster from DISQUS</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/05/18/seomoz-blog-post-introducing-qless/">SEOmoz Blog Post -- Introducing qless</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/03/11/redis-and-lua-for-robust-portable-libraries/">Redis and Lua for Robust, Portable Libraries</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/dlecocq">@dlecocq</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'dlecocq',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Your Name -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
