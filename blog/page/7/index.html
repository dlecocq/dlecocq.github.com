
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>My Octopress Blog</title>
  <meta name="author" content="Your Name">

  
  <meta name="description" content="A while ago, I saw an xkcd comic about being stranded on a desert island - looking out at the vast, perfectly flat blue infinity, struck by the lack &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://dlecocq.github.com/blog/page/7">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="My Octopress Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-39246569-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>



  <!-- MathJax -->
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        processEscapes: true
      }
    });
  </script>

  <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
  </script>

  <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
          var all = MathJax.Hub.getAllJax(), i;
          for(i=0; i < all.length; i += 1) {
              all[i].SourceElement().parentNode.className += ' has-jax';
          }
      });
  </script>

  <script type="text/javascript"
     src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">My Octopress Blog</a></h1>
  
    <h2>A blogging framework for hackers.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:dlecocq.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/05/07/the-life-aquatic/">The Life Aquatic</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-05-07T00:00:00-07:00" pubdate data-updated="true">May 7<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A while ago, I saw an <a href="http://xkcd.com/731/">xkcd comic</a> about being stranded on a desert island - looking out at the vast, perfectly flat blue infinity, struck by the lack of anything worthwhile.</p>

<p><img src="http://imgs.xkcd.com/comics/desert_island.png" alt="xkcd's Desert Island" width="590" style="align:center" /></p>

<p>Had I been stranded on a deserted island six months ago, this would have absolutely been me.  Well, and without goggles, it would still be me, but that’s neither here nor there.</p>

<p>As I live in Saudi Arabia, activities can be… sparse.  There’s cycling and sports, but for the most part it’s too hot to do anything until the evening.  In January I first joined some of my friends on a dive trip of theirs - I was only snorkeling, but they assured me there would be plenty to see.  Growing up a good 1500km from a large saline body of water, my experience had been rather limited.  When I finally got ready, and put my head under water, my head popped back up about half a second later, shouting to my friends, “Holy crap!  There’s fish everywhere!”</p>

<p>My friends just sort of looked back at me as if to say, “yeah… about that - that’s why we come.”</p>

<p>From that point on, I’ve been hooked.  I have since gotten <a href="http://www.padi.com/scuba/">dive-certified</a>, and gone a few trips.  Few things are better than getting to explore a world unseen by most people, sometimes seeing reefs so random and remote that it’s unlikely that people have even been there at all.  On every boat trip, we pass uncountably many shallow reef patches, that extend for kilometers - they really are sprawling, massive underwater cities.</p>

<p>A few weeks ago, I got to go on a truly fantastic trip.  The Marine Science department at KAUST tags and studies <a href="http://en.wikipedia.org/wiki/Whale_sharks">whale sharks</a>, and every so often they take along “tourists.”  We saw between 5 and 7 unique sharks, the longest of which was about 6.5m (20 feet), though apparently they can grow to be over 12m (40 feet).  Roll clip:</p>

<object width="590" height="332"><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="http://vimeo.com/moogaloop.swf?clip_id=11734916&amp;server=vimeo.com&amp;show_title=1&amp;show_byline=0&amp;show_portrait=0&amp;color=00ADEF&amp;fullscreen=1" /><embed src="http://vimeo.com/moogaloop.swf?clip_id=11734916&amp;server=vimeo.com&amp;show_title=1&amp;show_byline=0&amp;show_portrait=0&amp;color=00ADEF&amp;fullscreen=1" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="590" height="332" /></object>

<p>How this worked is we had two boats (one filled with researchers and one filled with us tourists), and if either boat spotted something, they’d sound the horn, and everyone jumped in.  As such, we would all sit on the edge of the boat, fins on, masks ready - just in and out of the water all day.  Once in, the sharks tended to swim pretty fast - they seem to be barely exerting themselves and we’re swimming as fast as we can.  And, if they don’t care to outrun us and want to get away, they dive beyond our reaches.</p>

<p>On this same trip we saw a lonely sea turtle, about the size of a dinner plate.  We all hopped in the water and had turns getting our pictures taken with him.  Honestly, I felt a little weird about picking him up, but he really did not seem to mind it.  It does violate a widely-followed rule among responsible divers - touch nothing (unless you really know what it is and that it’s not going to damage you or it).</p>

<p>We also saw a “pod” of three dolphins; they often appear briefly on these boat trips, but usually scurry off pretty quickly in our experience.  On this occasion, though, as we were already set up to be hopping in and out of the water at a moment’s notice, we did try to swim with them.  They mostly stayed about 6m below us, and were much more difficult to keep up with than the whale sharks.  That said, fortune favored the persistent, and after about 15 minutes of some of my hardest swimming, I managed to spot them and get within about 2m (6 feet) of them as they surfaced.  One was badly scarred across his back, but the other two were untouched.  They came up for a quick drink of air, descended a few meters, did a somersault underwater and then looked at me as if to say, “Oh, you can’t do that, can you?”</p>

<p>It’s hard to take in the incredible gravity and beauty of the sights, let alone when swimming as fast as you can and perpetually out of breath.  I’m glad I got the chance, and I hope to see more aquatic life, but there is definitely a reason it’s remote.  Consider this: in hiking, the highest I’ve been is just over 14,000 feet, but the limits of recreational diving is a mere 40m (130 feet) and that requires even more specialized training.  Consider, too, the <a href="http://i.imgur.com/m3ZxZ.jpg">Mariana Trench</a> - which is less accessible: the deep sea or space?</p>

<p>Since the opening of the KAUST beach, we’ve explored much of the reef, sometimes to the dismay of the coast guard.  We take precautions - <em>never</em> going alone, bringing a dive flag, and knowing our limits.  Floating along in the warm water, seeing thousands of fishes, swimming around is enough to make anyone want to play Jacques Cousteau.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/04/24/the-pains-of-nightly-builds/">The Pains of Nightly Builds</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-04-24T00:00:00-07:00" pubdate data-updated="true">Apr 24<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I’ve been working with WebKit a lot lately.  Specifically, WebGL.  It’s fantastic, and it has the potential to change a lot of important applications, but working with nightly builds is… well, frustrating.</p>

<p>I’ve been using a revision released in December.  Some later revisions have weird behaviors and draw pixelated, but I’ve finally come across a problem with r52426 that I just can’t circumvent - floating-point textures.  They just don’t seem to work properly.  I had noticed the bug before, but it wasn’t absolutely crucial before.  Rather, the real bug is that you can’t initialize floating-point textures from the JavaScript side.</p>

<p>They’ve fixed this in later versions, but many of these that have this bug fixed also have a problem with gl.viewport, which is pretty mission-critical.  So now I’m sifting through the changelog, hoping to find a release somewhere in the middle that isn’t completely broken.</p>

<p><strong>Update:</strong> Victory! If you’re going to be developing WebGL stuff on Mac, I’d recommend WebKit r53036.  It seems to have everything I need (so far) fixed.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/03/08/fix-warnings/">Fix Warnings</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-03-08T00:00:00-08:00" pubdate data-updated="true">Mar 8<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I would ask of anyone writing a library these days to get rid of compile warnings.  I find it a little disconcerting to see a library compiling with typecasting warnings between pointers.  I won’t name names here, but it is kind of unprofessional.</p>

<p>So please, compile with -Wall and fix your warnings.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/02/07/tech-addiction/">Tech Addiction</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-02-07T00:00:00-08:00" pubdate data-updated="true">Feb 7<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Several days ago, Gizmodo posted a quiz about <a href="http://gizmodo.com/5453262/quiz-are-you-addicted-to-technology">technology addiction</a>.  Somewhat nervously / reluctantly looked through the questions, and was pleased to find that I fit into their “Coffee Fiend” category.  Well, rather, I was pleased that I didn’t fall in any of their worse categories, despite working with computers for a living.  There are even some places I could do with shaving down that would get me into their “Social Drinker” category; I see this as proof that one still can be in a tech field and not be a total tech fiend.</p>

<p>Some of their more amusing / revealing / interesting questions were:</p>

<blockquote>
2. Do you sometimes bring your laptop when you sit on the toilet?</blockquote>

<p>Just for the record, I do not.  But, I know people who do, and let’s face it - that’s why the iPhone was invented in the first place.</p>

<blockquote>
8. Have you ever changed vacation plans based on wi-fi availability?</blockquote>

<p>Well, technically yes, I have done that.  But it was deciding between two capsule hotels, and I was going to be there for a week for a tech conference.  I think that’s justified.</p>

<blockquote>
10. If your house were on fire, would you run in to rescue your laptop?</blockquote>

<p>I have sort of done this already.  Fire alarms are a regular feature of KAUST, and one day we saw smoke coming from the building we were in as one went off.  Ben and I looked at each other for 2 or 3 seconds, then both immediately grabbed our laptops and dashed out.  In all fairness, most of my work is on there (I’m doing more off-site backups for the important stuff), and it’s the only computer I have in this country.  What is life without computer?</p>

<blockquote>
35. Do you tweet or read blogs while watching movies at home?</blockquote>

<p>Well, I do play Tetris.  That’s my tech meditation time.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/02/02/delicious-sshfs/">Delicious Sshfs</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-02-02T00:00:00-08:00" pubdate data-updated="true">Feb 2<span>nd</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>It is extremely easy for computer scientists (well, and the rest of humanity) to get entrenched in their ways.  You’ve learned and taken the time to become a master of a programming language, or tool, and it’s a serious time investment.  As such, new tools generally have to be very compelling in order to get someone to switch.  For example, I’m a recent svn-to-git convert, and am often met with horrified looks when I suggest others give it a shot.  A visiting professor I spoke to yesterday said that it would be years before they stopped using svn.</p>

<p>Recently, I’ve begun using sshfs.  It mounts a volume over ssh and appears as any normal folder on your computer.  It behaves that way at the command line, or your text editor, or as far as VLC is concerned.  For development, I had always maintained a local copy and rsync’d changes to the remote machine I was using.  It worked well enough, and was often more convenient than using a tool like Cyberduck.</p>

<p>Aron recommended sshfs, and though it took me a while to try it out, I’m hooked.  No more trying to remember if I’ve synchronized my code with the other machine I’m using, only editing and saving.  It’s really easy when you have ssh keys set up as well.  To mount your home directory on a remote machine:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$&gt;</span> mkdir datastore_mount
</span><span class="line"><span class="nv">$&gt;</span> sshfs datastore: datastore_mount
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>And now, I’ve got access to remote files on datastore as if they lived in the directory datastore_mount.  Unmounting is business as usual:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$&gt;</span> umount datastore_mount
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Try it, use it, live it.  You won’t regret it.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/01/25/snorkeling/">Snorkeling</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-01-25T00:00:00-08:00" pubdate data-updated="true">Jan 25<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>For the past semester, many of my friends here have been enjoying the Red Sea, diving regularly.  One even went on a two-week research cruise, making three to four dives a day.</p>

<p>‘What,’ I wondered, ‘could possibly be the fascination?’</p>

<p>Growing up in Colorado, playing around on the beach meant going to Boulder Reservoir, which isn’t much more than an enormous swimming pool.  Just not much remarkable about it.  The only <em>real</em> beaches I had been to until now were in San Francisco and Japan, and the novelty wore off pretty quickly.</p>

<p>This last weekend, I decided that I ought to give it a try, and not being certified for diving I went snorkeling with my friends.  We drove to a private beach (which was a treat in itself - men and women can mix, and music plays over the loudspeakers.  These are things I’ve learned to not take for granted), rented gear and got in the water.  On the dock, I was excited when I saw a small coral growing in the shallows.  It couldn’t have been more than 10 centimeters in diameter but thinking about exploring the beach for more such treasures was enticing.</p>

<p>We waded out and put on our flippers, and then our masks.  I dipped my head down, ready to explore, and instantly my head popped right back out of the water.  “Guys! Guys!” I shouted to my friends.  “There’s a freakin’ million fish here!”  They chuckled knowingly, and I realized this is what they came for.</p>

<p>I just could not get in the water fast enough.  There were so many fish I had never seen except for in aquariums, brightly colored, quick, and just stunning.  Thousands of them from deep blues to iridescent purples, all swarming around beautifully-colored coral and anemones.  All told, I spent about four hours tooling around the reef, examining fish at the cleaning station, clownfish in their anemones and predators lurking near the surface.</p>

<p>On leaving I instantly felt like a tree-hugging hippie, and felt a need to protect the ocean.  Ok, sure, it was a bit short-lived and I feel like someone who’s hopped on a bandwagon, but it’s an incredible world down there.  You see shadows off in the “distance” (though it’s usually only 30 feet away) shimmering and swimming around.  Floating in the sea, weightless, above the sheer cliff faces of 20, 30 or 40 feet is a unique sensation.  I tried to compare it to hiking and climbing mountains, but it occurred to me that unless I learn to base jump, I will never see that kind of geographical structure from the same relative perspective - hovering above it.</p>

<p>Between dives (well, my friends were diving while I was snorkeling) we’d pull out a book of Red Sea fish and try to find all the ones we’d seen.  The camaraderie of stories of dives past and fish seen was nearly as satisfying as the experience of being in the water like that.</p>

<p>I’m exploring getting certified (either through PADI or BSAC - we have both available here) so that I can join my friends on deeper adventures, but in the mean time I’m going snorkeling as often as I can.  Forgive the pun, but I think I’m hooked. </p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/12/29/monkey-business/">Monkey Business</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-29T00:00:00-08:00" pubdate data-updated="true">Dec 29<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Nagano (well, Yudanaka) is famous for it’s “Monkey Park,” an open space where <a href="http://en.wikipedia.org/wiki/Japanese_macaque">Japanese Macaque</a>s relax in large groups in the natural hot springs.  Visitors can walk among them as they graze, groom, and occasionally, fight.</p>

<p><img class="aligncenter" src="http://farm3.static.flickr.com/2511/4217485993_8969cc8ea8.jpg" alt="DSC_0023.NEF" /></p>

<p>The younger monkeys are pretty playful, climbing ropes and poles, and rough-housing with one another.  The adult monkeys seem more interested in eating the food provided to them, a mix of barley and other grains.  There seemed to be some areas used mostly by families (these were inaccessible to human visitors) and others that seemed to be dominated by younger bachelors.  Fights would break out from time to time, but nothing too serious.</p>

<p><img class="aligncenter" src="http://farm3.static.flickr.com/2691/4224513729_55efd61bcd.jpg" alt="DSC_0052.NEF" /></p>

<p>Japan is known for their natural hot springs, and the monkeys take full advantage.  The day I was there, it was about 3 degrees Celsius, and the water was pretty tempting.</p>

<p>You can get pretty close to these brazen animals, but do not touch.  Occasionally they will grab onto you, but I only saw one instance of this; a group of us were watching a couple monkeys playing and banging against a sign, when an attention-starved lad came up and tugged on one man’s coat to get his attention.  Still, they’re pretty aloof to our presence for the most part, and will walk and eat within a few feet of you.</p>

<p><img class="aligncenter" src="http://farm5.static.flickr.com/4009/4224517839_eb60b58eda.jpg" alt="DSC_0106.NEF" /></p>

<p>I kept thinking of them as terrestrial Ewoks, or furry seven-year-old human children, but the opposable toes are kind of unnerving.  They often appear so human that it’s hard to remember that they’re still very wild.</p>

<p><img class="aligncenter" src="http://farm5.static.flickr.com/4063/4225295600_2584689363.jpg" alt="DSC_0239.NEF" /></p>

<p>They cry and scream at one another, but these noises serve as low-priority warnings more than anything else.</p>

<p>If you even get a chance to visit, take full advantage.  Best US$5 I spent in Japan.  More photos on <a href="http://www.flickr.com/photos/danlecocq/sets/72157623077596510/">flickr</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/12/25/triangle-strip-for-grids-a-construction/">Triangle Strip for Grids - a Construction</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-25T00:00:00-08:00" pubdate data-updated="true">Dec 25<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I’m working with WebGL and as such, I’m discovering some quirks about OpenGL ES 2.0.  I have been using display lists as long as I’ve been using OpenGL, but WebGL doesn’t have support for them.  So, I’m buckled down and familiarized myself with vertex buffer objects, the (perhaps better) alternative.</p>

<p>At any rate, I need to render a regular 2D grid, and as it doesn’t support quads, either, I was forced to use triangles.  In the interest of getting things running, I just provided a wasteful list of discrete triangles.  This is wasteful because it references many more vertices than necessary - I ended up declaring <script type="math/tex">6n^2</script> vertices when in reality there are only <script type="math/tex">n^2 + n + 1</script> unique vertices.  This worked fine, until I wanted to increase the resolution.  It turns out, JavaScript doesn’t like large arrays.</p>

<p>That’s fair, because the implementation was pretty wasteful.  A triangle strip was the best choice anyway.  <strong><em>A triangle strip is a highly compact form of representing a mesh.  For <script type="math/tex">n</script> triangles, it requires only <script type="math/tex">n + 2</script> vertices defined.</em></strong>  Well, that’s roughly true.  We’ll see another case in a minute.  It’s useful when many triangles share vertices, and perhaps I’ll let <a href="http://en.wikipedia.org/wiki/Triangle_strip">Wikipedia’s explanation</a> stand.</p>

<p>It wasn’t immediately obvious how to define a grid out of a single triangle strip and so I got out a pen and paper.  I kept in mind a neat trick: <strong><em>if in a triangle strip, you need to skip the use of a vertex, a vertex can be introduced twice in a row.</em></strong>  That is, if I need triangles (6, 3, 7) and (7, 11, 6) in that order, you can just make your strip with 6, 3, 7, 7, 11, 6.  You can think of it as if there are two triangles created (3, 7, 7) and (7, 7, 11), but they have no area and a degenerate case - a line.  Furthermore, these lines lie on triangles already defined.</p>

<p>Perhaps the obvious choice doesn’t yield any results, and in fact in this layout, it can’t be easily done (you have to have vertices appear three times in a row):</p>

<p>[caption id=”attachment_792” align=”aligncenter” width=”207” caption=”This is a bad idea for a topology if you want to use a single triangle strip.”]<a href="http://dan.lecocq.us/wordpress/wp-content/uploads/2009/12/mesh_bad.png"><img src="http://dan.lecocq.us/wordpress/wp-content/uploads/2009/12/mesh_bad.png" alt="" title="mesh_bad" width="207" height="193" class="size-full wp-image-792" /></a>[/caption]</p>

<p>To better convince yourself, try to come up with a good way to put this in a triangle strip.  I’ll make the case that it is pretty difficult with a claim from graph theory.  In order for a triangle mesh to be turned into a triangle strip, each consecutive triangle must share an edge.  We can then think of the mesh as a connectivity graph (the <a href="http://en.wikipedia.org/wiki/Dual_graph">dual</a> of the mesh) and then the problem will emerge more clearly:</p>

<p>[caption id=”attachment_794” align=”aligncenter” width=”207” caption=”The dual graph of the bad idea.”]<a href="http://dan.lecocq.us/wordpress/wp-content/uploads/2009/12/mesh_bad_dual.png"><img src="http://dan.lecocq.us/wordpress/wp-content/uploads/2009/12/mesh_bad_dual.png" alt="" title="mesh_bad_dual" width="207" height="193" class="size-full wp-image-794" /></a>[/caption]</p>

<p>To make the triangle strip “nice,” we ought to be able to visit each node once and exactly once.  There’s good and bad news in this - it’s the same problem as finding a <a href="http://en.wikipedia.org/wiki/Hamiltonian_path">Hamlitonian path</a> which is NP complete.  The good news is that if we find a solution to our small problem, we’ve found a solution to all such grids (with arbitrarily many triangles).  Note that we don’t need an Eulerian path.</p>

<p>If you stare long enough at the above connectivity graph, you’ll hopefully convince yourself that there’s no way to traverse it visiting each node once and exactly once.  Go ahead and try - it’s pretty infuriating.</p>

<p>Looking at how we would traverse one strip (triangles a, b, c, d, e and f) actually gives us a clue.  A triangular strip for that case would be 0, 4, 1, 5, 2, 6, 3, 7, and happiness ensues and we should move onto the next row.  Unfortunately, in the context of this new row, we’re starting in a different place (topologically) than we started with the first strip.  Vertex 0 has two connected neighbors in its row - 1 and 4.  Vertex 7 has three in its row: 6, 10 and 11.  It turns out we can change up the topology to remedy this simply:</p>

<p>[caption id=”attachment_795” align=”aligncenter” width=”207” caption=”A much better topology for drawing this with a single triangle strip.”]<a href="http://dan.lecocq.us/wordpress/wp-content/uploads/2009/12/mesh_good.png"><img src="http://dan.lecocq.us/wordpress/wp-content/uploads/2009/12/mesh_good.png" alt="A much better topology for drawing this with a single triangle strip." title="mesh_good" width="207" height="193" class="size-full wp-image-795" /></a>[/caption]</p>

<p>We can also see that this is a much better solution by looking at this new graph’s dual:</p>

<p>[caption id=”attachment_796” align=”aligncenter” width=”207” caption=”The dual of the better topological choice.”]<a href="http://dan.lecocq.us/wordpress/wp-content/uploads/2009/12/mesh_good_dual.png"><img src="http://dan.lecocq.us/wordpress/wp-content/uploads/2009/12/mesh_good_dual.png" alt="" title="mesh_good_dual" width="207" height="193" class="size-full wp-image-796" /></a>[/caption]</p>

<p>You can probably easily find a Hamlitonian path in this case.  But this still leaves us with how to determine the vertex orderings.  We decided that the first row ought to be 0, 4, 1, 5, 2, 6, 3, 7, but moving on from there we need a bit of “glue” to move onto the next row.  We insert 7 again, and then continue on from there: 7, 11, 6, 10, 5, 9, 4, 8.  A bit more glue for the third row: 8, 12, 9, 13, 10, 14, 11, and 15:</p>

<p>[caption id=”attachment_797” align=”aligncenter” width=”251” caption=”An alternative representation of the vertex ordering”]<a href="http://dan.lecocq.us/wordpress/wp-content/uploads/2009/12/strip.png"><img src="http://dan.lecocq.us/wordpress/wp-content/uploads/2009/12/strip.png" alt="" title="strip" width="251" height="193" class="size-full wp-image-797" /></a>[/caption]</p>

<p>Looking at the indices from the first row, starting at 0, we can get the next index by alternately adding 4 and then subtracting 3.  On the next row, we’ll continue to add 4, but then alternately subtract 5.  The 4 is derived as being the number of vertices on a side (if there are <script type="math/tex">n</script> divisions, then there are <script type="math/tex">n+1</script> vertices), and the 3 and 5 are explained by the fact that we need to change columns in the mesh, by one step at a time.</p>

<p>An clean implementation is not trivial, but not extremely difficult.  In terms of results, I can fit more than 4 times as many vertices into the mesh than with a per-triangle implementation.  And to boot, it has cut the work of the vertex shader a great deal.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/12/24/webglot-a-preview/">webGLot - a Preview</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-24T00:00:00-08:00" pubdate data-updated="true">Dec 24<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I’ve <a href="http://dan.lecocq.us/wordpress/2009/09/22/the-future-of-the-internet/">mentioned WebGL before</a>, and I think it could be very important.  There is a <a href="http://code.google.com/apis/o3d/">competitor from Google</a>, but like OpenGL and OpenCL, this API is managed by the <a href="http://www.khronos.org/">Khronos Group</a> and that fact appeals to me.  Perhaps it’s that I’ve used it fairly extensively, but I really like OpenGL.  Despite its quirks, it’s quite powerful.</p>

<p>The big “get” is that it gives programmers access to hardware-accelerated graphics from directly within the browser.  There’s a lot of interest in this arena for game development as it would obviate much of the need for separate distributions based on operating system.  (Skip to the end for more of an opinion on this subject.)</p>

<p>As such, I’ve been working with WebGL as opposed to the Google-proposed O3D.  (I have every intention to explore O3D, time permitting, as there are some jagged edges to the current specification.)  The result of this recent toil is a budding WebGL implementation of my OpenGLot project.  It’s still in early stages, but in the coming weeks, it should develop even further.  To whet appetites, I have a few pictures.</p>

<p>[caption id=”attachment_788” align=”aligncenter” width=”300” caption=”A scalar field, my persistent test function.”]<a href="http://dan.lecocq.us/wordpress/wp-content/uploads/2009/12/Picture-105.png"><img src="http://dan.lecocq.us/wordpress/wp-content/uploads/2009/12/Picture-105-300x182.png" alt="A scalar field, my persistent test function." title="Picture 105" width="300" height="182" class="size-medium wp-image-788" /></a>[/caption]</p>

<p>[caption id=”attachment_789” align=”aligncenter” width=”300” caption=”A 3D surface, again one of my usual test functions.”]<a href="http://dan.lecocq.us/wordpress/wp-content/uploads/2009/12/Picture-111.png"><img src="http://dan.lecocq.us/wordpress/wp-content/uploads/2009/12/Picture-111-300x215.png" alt="A 3D surface, again one of my usual test functions." title="Picture 111" width="300" height="215" class="size-medium wp-image-789" /></a>[/caption]</p>

<p>I seriously doubt that WebGL will every match the performance of OpenGL.  Even though JavaScript interpreters are getting faster at a somewhat alarming rate, they won’t match the speed of C or C++.  That said, if one can appropriately offload work onto the GPU, it won’t matter as much, but there will always be that overhead.</p>

<p>It won’t so much be a matter of having the same performance, but <em>enough</em> performance.  If a person can go to a single webpage and get 60 frames per second performance in a game or tool without having to install software, that’s tremendous.  Currently I’ve been getting between 60 and 90 frames per second with WebGLot, and I’m sure I can keep that number up as more features are added.</p>

<p>My hope is that this will be a tool and library that has a wide-enough feature set by the time WebGL is widely adopted that becomes often-used.  But that’s just ego.  The purer motivation is that if you’re a math teacher, and you want to have interactive demonstrations of Newton’s method, or parametric surfaces, or even flow fields, you can write an application in 20 minutes that does all the heavy lifting of graphing it for you.  As long as you can describe the mathematical primitives, you should be able to render it.  Of course there will be a general-purpose grapher available for any calculus student who’s having trouble visualizing this or that, too.  Or a resourceful PDE student who need to solve his homework (the GPU-based PDE solver will take a little bit more time, but it’s very nearly complete).</p>

<p>In short, the strength of WebGL is that is has respectable performance, and in a year’s time, half the browsers (well maybe not half) on computers will support it, giving the average internet-user access to a wealth of media.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/12/22/silly-mistakes/">Silly Mistakes</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-22T00:00:00-08:00" pubdate data-updated="true">Dec 22<span>nd</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Every programmer has had this, or at least I like to think that every programmer has experienced this - you compile, press “go,” and epic failure.  And the joy doesn’t stop there - then the debugging begins.  Occasionally, one encounters a bug that gets the better of them, sometimes for hours, sometimes for days, and sometimes for <a href="http://en.wikipedia.org/wiki/Pentium_FDIV_bug">months</a>.</p>

<p>Hairs is pulled, teeth are gnashed, and eyeballs strain, scouring line after line.  You try to convince yourself that your algorithm is correct, and that each line of code is justified.  And yet, it still gets the better of you.</p>

<p>After perhaps eight hours, you swallow your pride, and ask a trusted friend to take a look.  Often the very act of explaining things to another human being is helpful, but sometimes you both have to dig into the code.  Maybe a third friend happens upon the two of you, and joins in.</p>

<p>Then, a light bulb goes off.  If you’re lucky, it’s a massive structural change that’s required, but sometimes, it’s a single line, or a single word or character, and you suddenly find yourself embarrassed.  But do not be.  Every programmer I’ve ever met, no matter how qualified has run into these problems.  Still, I find it easy to doubt my competence afterwards.</p>

<p>There are rare and beautiful moments when not only does code compile on the first try, but it runs as expected.  Few and far between, cherish these when they come.</p>

<p>This is all inspired from a recent bug I tracked down.  An embarrassing one.  Sure, had I read the 350 or so pages of the OpenGL ES 2.0 specification, I may have caught it earlier, but this was one of those times when it was a single word that had to change.  <strong>I tell myself that I won’t keep making these kinds of mistakes, and with each conquered bug I gain a tool, an experience point, and that’s what makes one’s craft.</strong></p>

<p>I’ve looked at the time I spend debugging, and I’ve noticed that the time it takes to solve a bug can often be reduced by leaving the problem for a bit.  Taking a walk, getting a cup of coffee, or sometimes watching an episode of Arrested Development.  <strong>The desire to find and fix a bug is a siren’s song - nearly impossible to walk away from, but often a bad idea.</strong></p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/8/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/6/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/10/11/running-sudo-with-pssh/">Running sudo with pssh</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/21/rough-array-hash-benchmark/">Rough Array Hash Benchmark</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/05/20/taskmaster-from-disqus/">Taskmaster from DISQUS</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/05/18/seomoz-blog-post-introducing-qless/">SEOmoz Blog Post &#8211; Introducing qless</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/03/11/redis-and-lua-for-robust-portable-libraries/">Redis and Lua for Robust, Portable Libraries</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/dlecocq">@dlecocq</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'dlecocq',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Your Name -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
